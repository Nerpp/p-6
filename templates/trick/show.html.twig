{% extends 'base.html.twig' %}

{% block title %} {{ trick.name }} {% endblock %}

{% block titre %} {{ trick.name }} {% endblock %}

{% block body %}

	<div class="row justify-content-center">

		<div class="col-3">
			<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
				<div class="carousel-inner">
					{% for images in trick.image  %}

						{% if(loop.index == '1') %}
							<div class="carousel-item active">
								<img class="d-block" src="{{ asset("images/"~images.source) }}" alt="First slide">
							</div>
						{% else %}
							<div class="carousel-item">
								<img class="d-block" src="{{ asset("images/"~images.source) }}" alt="Second slide">
							</div>
						{% endif %}
					{% endfor %}

				</div>
				<a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>

		</div>
	</div>

	<div class="row">
		<div class="col-3">
			<h2>Description</h2>
		</div>
	</div>


	<div class="row justify-content-center">
		<div class="col-6">
			<p>{{ trick.description }}</p>
		</div>
	</div>

	<div class="row">
		<div class="col-3">
			<h2>Videos</h2>
		</div>
	</div>

	<div class="row">
		{% for videos in trick.video  %}
			<div class="col-4">
				<iframe width="300" height="300" src="{{ videos.url}}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			</div>
		{% endfor %}
	</div>

	<div class="row  justify-content-end">
		<div class="col-3">
			<p>
				<strong>Crée le :</strong>
				{{ trick.createdAt ? trick.createdAt|date('d-m-Y H:i') : '' }}
			</p>
		</div>
	</div>

	{% if trick.updateAt == trick.createdAt %}
		<div class="row  justify-content-end">
			<div class="col-3">
				<p>
					<strong>Mis à jour :</strong>
					{{ trick.updateAt|date('d-m-Y H:i') }}
				</p>
			</div>
		</div>
	{% endif %}

	<div class="row justify-content-between">
		<div class="col-4">
			<p>
				<a href="{{ path('trick_index') }}">back to list</a>
				{% if app.user==trick.user %}
					<a href="{{ path('trick_edit', {'id': trick.id}) }}">
						| edit</a>
				{% endif %}
			</p>
		</div>

		{% if app.user==trick.user %}
			<div class="col-2">
				{{ include('trick/_delete_form.html.twig') }}
			</div>
		{% endif %}
	</div>

	{% if(app.user) %}
<div class="row">
	{{ form_start(formComments) }}

	<div class="col-12">
		<label for="">
			<img src="{{ asset("images/"~app.user.image.source ) }}" class="commentProfile">
		</label>
		{{ form_widget(formComments.comment,{'attr': {'placeholder': "Commenter en tant que "~app.user.name  }}) }}
	</div>
	<button type="submit">Ajouter un commentaire</button>
	{{ form_end(formComments) }}
</div>
	{% endif %}

	{% for comment in trick.comments  %}
		<div class="row">

			<p><img src="{{ asset("images/"~trick.user.image.source ) }}" class="commentProfile">
				{{ comment.user.name }}</p>
		</div>
		<div class="row jumbotron">
			<p>{{ comment.comment }}</p>
		</div>
	{% endfor %}

{% endblock %}
